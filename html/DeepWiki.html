<!DOCTYPE html>
<html lang="en" class="dark" style="color-scheme: dark;"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="DeepWiki_files/f30152c0704fba31.css" data-precedence="next"><link rel="stylesheet" href="DeepWiki_files/69dc9a343a8d610c.css" data-precedence="next"><link rel="stylesheet" href="DeepWiki_files/97aa57a0cb43847d.css" data-precedence="next"><link rel="preload" as="script" fetchpriority="low" href="DeepWiki_files/webpack-acbbbb548492d4a6.js"><script src="DeepWiki_files/4bd1b696-cebf68b71ed1e85d.js" async=""></script><script src="DeepWiki_files/1684-6bf7d92e9478c1cb.js" async=""></script><script src="DeepWiki_files/main-app-8ab5af3d6b81086e.js" async=""></script><script src="DeepWiki_files/b1298b8d-549c141f97a3b262.js" async=""></script><script src="DeepWiki_files/378e5a93-3b0f971d3611a8a5.js" async=""></script><script src="DeepWiki_files/f7f68e2d-40290491c524df5c.js" async=""></script><script src="DeepWiki_files/5009-cf1c1739f4eccbfa.js" async=""></script><script src="DeepWiki_files/3377-d302682beb4206f6.js" async=""></script><script src="DeepWiki_files/6671-b0da8a89e8d16b02.js" async=""></script><script src="DeepWiki_files/3852-f786c46570f1c37a.js" async=""></script><script src="DeepWiki_files/layout-069cb77866786652.js" async=""></script><script src="DeepWiki_files/7bf36345-20a79815585d2583.js" async=""></script><script src="DeepWiki_files/c16f53c3-c80d3b6d0c4af7a0.js" async=""></script><script src="DeepWiki_files/537-d9d5e9261de3e69c.js" async=""></script><script src="DeepWiki_files/2136-0f8d797058c844d4.js" async=""></script><script src="DeepWiki_files/5217-9d83ca492e50c5ed.js" async=""></script><script src="DeepWiki_files/9514-78acba0a55208c16.js" async=""></script><script src="DeepWiki_files/168-d8e567d7acd9a9f8.js" async=""></script><script src="DeepWiki_files/5938-755c17b2f8b25b9d.js" async=""></script><script src="DeepWiki_files/6422-90b4a59eb579f66b.js" async=""></script><script src="DeepWiki_files/7111-6aae15bf6bffbdb1.js" async=""></script><script src="DeepWiki_files/3239-098acbc71a0d78b2.js" async=""></script><meta name="next-size-adjust" content=""><title>DeepWiki</title><meta name="description" content="DeepWiki provides up-to-date documentation you can talk to, for every repo in the world. Think Deep Research for GitHub - powered by Devin."><meta property="og:title" content="DeepWiki"><meta property="og:description" content="DeepWiki provides up-to-date documentation you can talk to, for every repo in the world. Think Deep Research for GitHub - powered by Devin."><meta property="og:url" content="https://deepwiki.com"><meta property="og:site_name" content="DeepWiki"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="DeepWiki"><meta name="twitter:description" content="DeepWiki provides up-to-date documentation you can talk to, for every repo in the world. Think Deep Research for GitHub - powered by Devin."><link rel="icon" href="https://deepwiki.com/favicon.ico" type="image/x-icon" sizes="48x48"><link rel="icon" href="https://deepwiki.com/icon.png?66aaf51e0e68c818" type="image/png" sizes="16x16"><link rel="apple-touch-icon" href="https://deepwiki.com/apple-icon.png?a4f658907db0ab87" type="image/png" sizes="180x180"><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="DeepWiki_files/polyfills-42372ed130431b0a.js" nomodule=""></script><style type="text/css">[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}</style><link rel="preload" href="https://deepwiki.com/_next/static/media/569ce4b8f30dc480-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://deepwiki.com/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://deepwiki.com/_next/static/media/3478b6abef19b3b3-s.p.woff2" as="font" crossorigin="" type="font/woff2"><script id="hotjar-init-script" crossorigin="anonymous">(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:6382967,hjsv:6,hjdebug:false};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><script async="" src="DeepWiki_files/hotjar-6382967.js"></script><script async="" src="DeepWiki_files/modules.e8a4a0ad0c33518716fb.js" charset="utf-8"></script></head><body class="__variable_5cfdac font-geist-sans relative min-h-screen __variable_9a8899 bg-background antialiased" style=""><section aria-label="Notifications alt+T" tabindex="-1" aria-live="polite" aria-relevant="additions text" aria-atomic="false"></section><script>((e,t,r,n,a,o,i,s)=>{let u=document.documentElement,l=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&o?a.map(e=>o[e]||e):a;r?(u.classList.remove(...n),u.classList.add(o&&o[t]?o[t]:t)):u.setAttribute(e,t)}),r=t,s&&l.includes(r)&&(u.style.colorScheme=r)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}})("class","theme","light",null,["light","dark"],null,true,true)</script><div class="flex min-h-full w-full flex-col scroll-smooth text-[#cbcbcb]" style="scrollbar-gutter:stable"><div class="bg-main border-b-border sticky top-0 z-30 border-b border-dashed"><div class="font-geist-mono relative flex h-8 items-center justify-center text-xs font-medium text-white sm:hidden"><div class="powered-by-devin-gradient absolute inset-0 z-[-1] h-8 w-full"></div><a target="_blank" rel="noopener noreferrer" class="flex items-center gap-2" href="https://devin.ai/"><svg class="size-3 [&amp;_path]:stroke-0 [&amp;_path]:animate-[custom-pulse_1.8s_infinite_var(--delay,0s)]" xmlns="http://www.w3.org/2000/svg" viewBox="110 110 460 500"><path style="fill:#21c19a" class="[--delay:0.6s]" d="M418.73,332.37c9.84-5.68,22.07-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.58,1.06.19.06.37.11.55.16.87.21,1.76.34,2.65.35.04,0,.08.02.13.02.1,0,.19-.03.29-.04.83-.02,1.64-.13,2.45-.32.14-.03.28-.05.42-.09.87-.24,1.7-.59,2.5-1.03.08-.04.17-.06.25-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.06,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.57-1.06-.19-.06-.37-.11-.56-.16-.88-.21-1.76-.34-2.65-.34-.13,0-.26.02-.4.02-.84.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.24.1.8.44,1.64.79,2.5,1.03.14.04.28.06.42.09.81.19,1.62.3,2.45.32.1,0,.19.04.29.04.04,0,.08-.02.13-.02.89,0,1.77-.13,2.65-.35.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.58-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-.08-.04-.16-.06-.24-.1-.8-.44-1.64-.8-2.51-1.04-.13-.04-.26-.05-.39-.09-.82-.2-1.65-.31-2.49-.33-.13,0-.25-.02-.38-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.75.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.07,5.68-31.9,0-9.84-5.68-15.95-16.27-15.95-27.63s6.11-21.95,15.95-27.63Z"></path><path style="fill:#3969ca" d="M141.09,317.65l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c.08-.04.13-.11.2-.16.78-.48,1.51-1.02,2.15-1.66.1-.1.18-.21.28-.31.57-.6,1.08-1.26,1.51-1.97.07-.12.15-.22.22-.34.44-.77.77-1.6,1.03-2.47.05-.19.1-.37.14-.56.22-.89.37-1.81.37-2.76v-29.43c0-11.36,6.11-21.95,15.96-27.63s22.06-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.57,1.06.19.06.37.11.56.16.87.21,1.76.34,2.64.35.04,0,.09.02.13.02.1,0,.19-.04.29-.04.83-.02,1.65-.13,2.45-.32.14-.03.28-.05.41-.09.87-.24,1.71-.6,2.51-1.04.08-.04.16-.06.24-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.07,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.58-1.06-.19-.06-.37-.11-.55-.16-.88-.21-1.76-.34-2.65-.35-.13,0-.26.02-.4.02-.83.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22Z"></path><path style="fill:#0294de" class="[--delay:1.2s]" d="M396.88,484.35l-50.97-29.43c-.08-.04-.17-.06-.24-.1-.8-.44-1.64-.79-2.51-1.03-.14-.04-.27-.06-.41-.09-.81-.19-1.64-.3-2.47-.32-.13,0-.26-.02-.39-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.76.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.06,5.68-31.9,0-9.84-5.68-15.96-16.27-15.96-27.63v-29.43c0-.95-.15-1.87-.37-2.76-.05-.19-.09-.37-.14-.56-.25-.86-.59-1.69-1.03-2.47-.07-.12-.15-.22-.22-.34-.43-.71-.94-1.37-1.51-1.97-.1-.1-.18-.21-.28-.31-.65-.63-1.37-1.18-2.15-1.66-.07-.04-.13-.11-.2-.16l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.25.1.8.44,1.63.79,2.5,1.03.14.04.29.06.43.09.8.19,1.61.3,2.43.32.1,0,.2.04.3.04.04,0,.09-.02.13-.02.88,0,1.77-.13,2.64-.34.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.57-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22Z"></path></svg>Powered by Devin</a></div><div class="container-wrapper"><div class="container mx-auto flex w-full flex-row items-center gap-2 py-4 md:py-6"><a class="flex items-center gap-3" href="https://deepwiki.com/"><span class="text-base font-medium leading-none text-white md:text-lg">DeepWiki</span></a><div class="flex-1"></div><div class="flex items-center gap-4"><a href="https://devin.ai/" target="_blank" rel="noopener noreferrer" class="group hidden items-center gap-1.5 md:flex"><div class="relative"><span class="text-xs font-light text-white/70 transition-colors group-hover:text-white">powered by</span><div class="absolute bottom-0 left-0 h-[1px] w-0 bg-black/30 transition-all duration-300 group-hover:w-full dark:bg-white/30"></div></div><div class="flex items-center gap-1 transition-transform duration-300 group-hover:translate-x-0.5"><svg class="size-4 transform transition-transform duration-700 group-hover:rotate-180 [&amp;_path]:stroke-0" xmlns="http://www.w3.org/2000/svg" viewBox="110 110 460 500"><path style="fill:#21c19a" class="" d="M418.73,332.37c9.84-5.68,22.07-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.58,1.06.19.06.37.11.55.16.87.21,1.76.34,2.65.35.04,0,.08.02.13.02.1,0,.19-.03.29-.04.83-.02,1.64-.13,2.45-.32.14-.03.28-.05.42-.09.87-.24,1.7-.59,2.5-1.03.08-.04.17-.06.25-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.06,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.57-1.06-.19-.06-.37-.11-.56-.16-.88-.21-1.76-.34-2.65-.34-.13,0-.26.02-.4.02-.84.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.24.1.8.44,1.64.79,2.5,1.03.14.04.28.06.42.09.81.19,1.62.3,2.45.32.1,0,.19.04.29.04.04,0,.08-.02.13-.02.89,0,1.77-.13,2.65-.35.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.58-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-.08-.04-.16-.06-.24-.1-.8-.44-1.64-.8-2.51-1.04-.13-.04-.26-.05-.39-.09-.82-.2-1.65-.31-2.49-.33-.13,0-.25-.02-.38-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.75.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.07,5.68-31.9,0-9.84-5.68-15.95-16.27-15.95-27.63s6.11-21.95,15.95-27.63Z"></path><path style="fill:#3969ca" d="M141.09,317.65l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c.08-.04.13-.11.2-.16.78-.48,1.51-1.02,2.15-1.66.1-.1.18-.21.28-.31.57-.6,1.08-1.26,1.51-1.97.07-.12.15-.22.22-.34.44-.77.77-1.6,1.03-2.47.05-.19.1-.37.14-.56.22-.89.37-1.81.37-2.76v-29.43c0-11.36,6.11-21.95,15.96-27.63s22.06-5.68,31.91,0l25.49,14.71c.82.48,1.69.8,2.57,1.06.19.06.37.11.56.16.87.21,1.76.34,2.64.35.04,0,.09.02.13.02.1,0,.19-.04.29-.04.83-.02,1.65-.13,2.45-.32.14-.03.28-.05.41-.09.87-.24,1.71-.6,2.51-1.04.08-.04.16-.06.24-.1l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-.08.04-.13.11-.2.16-.78.48-1.51,1.02-2.15,1.66-.1.1-.18.21-.28.31-.57.6-1.08,1.26-1.51,1.97-.07.12-.15.22-.22.34-.44.77-.77,1.6-1.03,2.47-.05.19-.1.37-.14.56-.22.89-.37,1.81-.37,2.76v29.43c0,11.36-6.11,21.95-15.95,27.63-9.84,5.68-22.07,5.68-31.91,0l-25.49-14.71c-.82-.48-1.69-.8-2.58-1.06-.19-.06-.37-.11-.55-.16-.88-.21-1.76-.34-2.65-.35-.13,0-.26.02-.4.02-.83.02-1.66.13-2.47.32-.13.03-.27.05-.4.09-.87.24-1.71.6-2.51,1.04-.08.04-.16.06-.24.1l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22Z"></path><path style="fill:#0294de" class="" d="M396.88,484.35l-50.97-29.43c-.08-.04-.17-.06-.24-.1-.8-.44-1.64-.79-2.51-1.03-.14-.04-.27-.06-.41-.09-.81-.19-1.64-.3-2.47-.32-.13,0-.26-.02-.39-.02-.89,0-1.78.13-2.66.35-.18.04-.36.1-.54.15-.88.26-1.76.59-2.58,1.07l-25.49,14.72c-9.84,5.68-22.06,5.68-31.9,0-9.84-5.68-15.96-16.27-15.96-27.63v-29.43c0-.95-.15-1.87-.37-2.76-.05-.19-.09-.37-.14-.56-.25-.86-.59-1.69-1.03-2.47-.07-.12-.15-.22-.22-.34-.43-.71-.94-1.37-1.51-1.97-.1-.1-.18-.21-.28-.31-.65-.63-1.37-1.18-2.15-1.66-.07-.04-.13-.11-.2-.16l-50.97-29.43c-3.65-2.11-8.15-2.11-11.81,0l-50.97,29.43c-3.65,2.11-5.9,6.01-5.9,10.22v58.86c0,4.22,2.25,8.11,5.9,10.22l50.97,29.43c.08.04.17.06.25.1.8.44,1.63.79,2.5,1.03.14.04.29.06.43.09.8.19,1.61.3,2.43.32.1,0,.2.04.3.04.04,0,.09-.02.13-.02.88,0,1.77-.13,2.64-.34.19-.04.37-.1.56-.16.88-.26,1.75-.59,2.57-1.06l25.49-14.71c9.84-5.68,22.06-5.68,31.91,0,9.84,5.68,15.95,16.27,15.95,27.63v29.43c0,.95.15,1.87.37,2.76.05.19.09.37.14.56.25.86.59,1.69,1.03,2.47.07.12.15.22.22.34.43.71.94,1.37,1.51,1.97.1.1.18.21.28.31.65.63,1.37,1.18,2.15,1.66.07.04.13.11.2.16l50.97,29.43c1.83,1.05,3.86,1.58,5.9,1.58s4.08-.53,5.9-1.58l50.97-29.43c3.65-2.11,5.9-6.01,5.9-10.22v-58.86c0-4.22-2.25-8.11-5.9-10.22Z"></path></svg><span class="text-sm font-medium text-white">Devin</span></div></a><button class="border-border bg-surface hover:border-border-hover hover:bg-component ml-auto flex cursor-pointer items-center gap-1.5 rounded-md border px-3 py-1.5 text-sm font-medium text-white transition-all" aria-label="Share"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg><span>Share</span></button><button class="hover:bg-surface-hover flex h-8 w-8 cursor-pointer items-center justify-center rounded-md transition-colors" aria-label="Switch to light mode"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-5 w-5 text-gray-300"><path d="M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm8,24a64,64,0,1,0,64,64A64.07,64.07,0,0,0,128,64ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"></path></svg></button></div></div></div></div><div class="container-wrapper flex-1"><div class="container relative mx-auto"><div class="pb-36"><div id="1" class="flex flex-col gap-3 pt-8 lg:flex-row" data-query-display="true"><div class="flex max-h-fit min-w-0 flex-1 flex-shrink-0 flex-col xl:[flex-grow:2]"><div class=""><div class="flex flex-col"><a class="flex items-center gap-2 text-base text-neutral-400 transition-colors hover:text-black dark:hover:text-white" href="https://deepwiki.com/Algorithm-zh/StreamMediaServer"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path></svg>return to Algorithm-zh/StreamMediaServer</a><div class="flex flex-col items-start gap-2 text-white"><div class="group relative flex items-center"><span class="text-xl xl:text-2xl">给我画一个推流客户端将rtmp流推到该服务器，然后拉流客户端使用htp协议请求该服务器的flv的全过程，注意是所有的过程，把过程图画清楚<button class="relative ml-2 cursor-pointer text-gray-400 opacity-0 transition-opacity hover:text-blue-400 focus:opacity-100 group-hover:opacity-100" aria-label="Copy link to query"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"></path></svg></button></span></div></div></div><div class="py-3"><div class="text-primary/70 flex flex-col items-start justify-between text-sm"><div class="mb-1"><div class="inline-flex items-center rounded-full px-2.5 py-1 text-xs font-medium bg-[#ef9541]/20 text-[#ef9541]"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 256 256" class="mr-1"><path d="M212,76V72a44,44,0,0,0-74.86-31.31,3.93,3.93,0,0,0-1.14,2.8v88.72a4,4,0,0,0,6.2,3.33A47.67,47.67,0,0,1,167.68,128a8.18,8.18,0,0,1,8.31,7.58,8,8,0,0,1-8,8.42,32,32,0,0,0-32,32v33.88a4,4,0,0,0,1.49,3.12,47.92,47.92,0,0,0,74.21-17.16,4,4,0,0,0-4.49-5.56A68.06,68.06,0,0,1,192,192h-7.73a8.18,8.18,0,0,1-8.25-7.47,8,8,0,0,1,8-8.53h8a51.6,51.6,0,0,0,24-5.88v0A52,52,0,0,0,212,76Zm-12,36h-4a36,36,0,0,1-36-36V72a8,8,0,0,1,16,0v4a20,20,0,0,0,20,20h4a8,8,0,0,1,0,16ZM88,28A44.05,44.05,0,0,0,44,72v4a52,52,0,0,0-4,94.12h0A51.6,51.6,0,0,0,64,176h7.73A8.18,8.18,0,0,1,80,183.47,8,8,0,0,1,72,192H64a67.48,67.48,0,0,1-15.21-1.73,4,4,0,0,0-4.5,5.55A47.93,47.93,0,0,0,118.51,213a4,4,0,0,0,1.49-3.12V176a32,32,0,0,0-32-32,8,8,0,0,1-8-8.42A8.18,8.18,0,0,1,88.32,128a47.67,47.67,0,0,1,25.48,7.54,4,4,0,0,0,6.2-3.33V43.49a4,4,0,0,0-1.14-2.81A43.85,43.85,0,0,0,88,28Zm8,48a36,36,0,0,1-36,36H56a8,8,0,0,1,0-16h4A20,20,0,0,0,80,76V72a8,8,0,0,1,16,0Z"></path></svg>Deep</div></div><div class="flex w-full items-center justify-between gap-2"><div class="">Searched across Algorithm-zh/StreamMediaServer</div></div></div></div><div class="h-fit rounded-lg" style="scrollbar-width: thin; scrollbar-color: rgb(58, 58, 58) transparent;"><div class="dark:[&amp;_pre:has(code)]:bg-shade dark:[&amp;_code[data-lang]]:bg-shade relative flex flex-col gap-1 rounded-md border-[0.5px] border-[#d0d0d0] bg-[#f8f8f8] p-4 text-white [overflow-wrap:anywhere] dark:border-[#2F2F2F] dark:bg-[#141414] [&amp;_pre]:my-3"><div data-state="closed"><div class="flex flex-col gap-2"><button type="button" aria-controls="radix-«r0»" aria-expanded="false" data-state="closed" class="flex w-fit items-center gap-1.5 text-sm text-neutral-300"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="size-4 transition-transform"><path d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"></path></svg><span class="">Thought Process</span></button><div data-state="closed" id="radix-«r0»" style="--radix-collapsible-content-height: 276px; --radix-collapsible-content-width: 555.5999755859375px;" hidden=""></div></div></div><div class="prose-custom prose-custom-md prose-custom-gray !max-w-none text-neutral-300 [overflow-wrap:anywhere]"><h1 class="group flex items-center">StreamMediaServer RTMP推流和HTTP-FLV拉流全过程  </h1>
<p>下面的流程图描述了推流客户端使用RTMP协议推流到StreamMediaServer，然后拉流客户端使用HTTP协议请求FLV流的完整过程。</p>
<pre class="px-2 py-1.5 has-[code]:rounded-md has-[code]:!bg-[#e5e5e5] has-[div]:bg-transparent has-[div]:!p-0 has-[code]:text-stone-900 dark:has-[code]:!bg-[#242424] has-[code]:dark:text-white [&amp;_code]:block [&amp;_code]:border-none [&amp;_code]:bg-transparent [&amp;_code]:p-0"><div class="group relative cursor-pointer overflow-x-auto rounded-md bg-[#f2f1f0] p-4 transition-colors hover:bg-[#ededed] dark:bg-[#1f1f1f] dark:hover:bg-[#242424]" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-«r5»" data-state="closed"><div class="flex justify-center"><svg aria-roledescription="sequence" role="graphics-document document" viewBox="-50 -10 2827.5 3362" style="max-width: 2827.5px;" xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-w6v3u23bouk"><g><rect class="actor actor-bottom" ry="3" rx="3" name="FlvPlayerUser" height="65" width="150" stroke="#666" fill="#eaeaea" y="3276" x="2562"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="3308.5" x="2637"><tspan dy="0" x="2637">FlvPlayerUser</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="FlvContext" height="65" width="150" stroke="#666" fill="#eaeaea" y="3276" x="2265"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="3308.5" x="2340"><tspan dy="0" x="2340">FlvContext</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="PullClient" height="65" width="150" stroke="#666" fill="#eaeaea" y="3276" x="1999"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="3308.5" x="2074"><tspan dy="0" x="2074">拉流客户端</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="HttpServer" height="65" width="150" stroke="#666" fill="#eaeaea" y="3276" x="1636"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="3308.5" x="1711"><tspan dy="0" x="1711">HTTP服务器</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Stream" height="65" width="150" stroke="#666" fill="#eaeaea" y="3276" x="1436"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="3308.5" x="1511"><tspan dy="0" x="1511">Stream</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Session" height="65" width="150" stroke="#666" fill="#eaeaea" y="3276" x="1236"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="3308.5" x="1311"><tspan dy="0" x="1311">Session</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="LiveService" height="65" width="150" stroke="#666" fill="#eaeaea" y="3276" x="597"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="3308.5" x="672"><tspan dy="0" x="672">LiveService</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="RtmpServer" height="65" width="150" stroke="#666" fill="#eaeaea" y="3276" x="285"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="3308.5" x="360"><tspan dy="0" x="360">RTMP服务器</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="PushClient" height="65" width="150" stroke="#666" fill="#eaeaea" y="3276" x="0"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="3308.5" x="75"><tspan dy="0" x="75">推流客户端</tspan></text></g><g><line name="FlvPlayerUser" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="3276" x2="2637" y1="65" x1="2637" id="actor16"></line><g id="root-16"><rect class="actor actor-top" ry="3" rx="3" name="FlvPlayerUser" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="2562"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="32.5" x="2637"><tspan dy="0" x="2637">FlvPlayerUser</tspan></text></g></g><g><line name="FlvContext" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="3276" x2="2340" y1="65" x1="2340" id="actor15"></line><g id="root-15"><rect class="actor actor-top" ry="3" rx="3" name="FlvContext" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="2265"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="32.5" x="2340"><tspan dy="0" x="2340">FlvContext</tspan></text></g></g><g><line name="PullClient" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="3276" x2="2074" y1="65" x1="2074" id="actor14"></line><g id="root-14"><rect class="actor actor-top" ry="3" rx="3" name="PullClient" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="1999"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="32.5" x="2074"><tspan dy="0" x="2074">拉流客户端</tspan></text></g></g><g><line name="HttpServer" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="3276" x2="1711" y1="65" x1="1711" id="actor13"></line><g id="root-13"><rect class="actor actor-top" ry="3" rx="3" name="HttpServer" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="1636"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="32.5" x="1711"><tspan dy="0" x="1711">HTTP服务器</tspan></text></g></g><g><line name="Stream" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="3276" x2="1511" y1="65" x1="1511" id="actor12"></line><g id="root-12"><rect class="actor actor-top" ry="3" rx="3" name="Stream" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="1436"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="32.5" x="1511"><tspan dy="0" x="1511">Stream</tspan></text></g></g><g><line name="Session" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="3276" x2="1311" y1="65" x1="1311" id="actor11"></line><g id="root-11"><rect class="actor actor-top" ry="3" rx="3" name="Session" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="1236"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="32.5" x="1311"><tspan dy="0" x="1311">Session</tspan></text></g></g><g><line name="LiveService" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="3276" x2="672" y1="65" x1="672" id="actor10"></line><g id="root-10"><rect class="actor actor-top" ry="3" rx="3" name="LiveService" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="597"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="32.5" x="672"><tspan dy="0" x="672">LiveService</tspan></text></g></g><g><line name="RtmpServer" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="3276" x2="360" y1="65" x1="360" id="actor9"></line><g id="root-9"><rect class="actor actor-top" ry="3" rx="3" name="RtmpServer" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="285"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="32.5" x="360"><tspan dy="0" x="360">RTMP服务器</tspan></text></g></g><g><line name="PushClient" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="3276" x2="75" y1="65" x1="75" id="actor8"></line><g id="root-8"><rect class="actor actor-top" ry="3" rx="3" name="PushClient" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text class="actor actor-box" alignment-baseline="central" dominant-baseline="central" style="text-anchor: middle; font-size: 16px; font-weight: 400;" y="32.5" x="75"><tspan dy="0" x="75">推流客户端</tspan></text></g></g><style>#mermaid-w6v3u23bouk{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;fill:#ccc;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-w6v3u23bouk .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-w6v3u23bouk .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-w6v3u23bouk .error-icon{fill:#333;}#mermaid-w6v3u23bouk .error-text{fill:#cccccc;stroke:#cccccc;}#mermaid-w6v3u23bouk .edge-thickness-normal{stroke-width:1px;}#mermaid-w6v3u23bouk .edge-thickness-thick{stroke-width:3.5px;}#mermaid-w6v3u23bouk .edge-pattern-solid{stroke-dasharray:0;}#mermaid-w6v3u23bouk .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-w6v3u23bouk .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-w6v3u23bouk .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-w6v3u23bouk .marker{fill:#666;stroke:#666;}#mermaid-w6v3u23bouk .marker.cross{stroke:#666;}#mermaid-w6v3u23bouk svg{font-family:ui-sans-serif,-apple-system,system-ui,Segoe UI,Helvetica;font-size:16px;}#mermaid-w6v3u23bouk p{margin:0;}#mermaid-w6v3u23bouk .actor{stroke:#444;fill:#161616;}#mermaid-w6v3u23bouk text.actor&gt;tspan{fill:#fff;stroke:none;}#mermaid-w6v3u23bouk .actor-line{stroke:#444;}#mermaid-w6v3u23bouk .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#666;}#mermaid-w6v3u23bouk .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#666;}#mermaid-w6v3u23bouk #arrowhead path{fill:#666;stroke:#666;}#mermaid-w6v3u23bouk .sequenceNumber{fill:#999999;}#mermaid-w6v3u23bouk #sequencenumber{fill:#666;}#mermaid-w6v3u23bouk #crosshead path{fill:#666;stroke:#666;}#mermaid-w6v3u23bouk .messageText{fill:#ccc;stroke:none;}#mermaid-w6v3u23bouk .labelBox{stroke:#222;fill:#111;}#mermaid-w6v3u23bouk .labelText,#mermaid-w6v3u23bouk .labelText&gt;tspan{fill:#ccc;stroke:none;}#mermaid-w6v3u23bouk .loopText,#mermaid-w6v3u23bouk .loopText&gt;tspan{fill:#fff;stroke:none;}#mermaid-w6v3u23bouk .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:#222;fill:#222;}#mermaid-w6v3u23bouk .note{stroke:#333;fill:#222;}#mermaid-w6v3u23bouk .noteText,#mermaid-w6v3u23bouk .noteText&gt;tspan{fill:#ccc;stroke:none;}#mermaid-w6v3u23bouk .activation0{fill:hsl(-120, 0%, 13.3333333333%);stroke:hsl(-120, 0%, 3.3333333333%);}#mermaid-w6v3u23bouk .activation1{fill:hsl(-120, 0%, 13.3333333333%);stroke:hsl(-120, 0%, 3.3333333333%);}#mermaid-w6v3u23bouk .activation2{fill:hsl(-120, 0%, 13.3333333333%);stroke:hsl(-120, 0%, 3.3333333333%);}#mermaid-w6v3u23bouk .actorPopupMenu{position:absolute;}#mermaid-w6v3u23bouk .actorPopupMenuPanel{position:absolute;fill:#161616;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#mermaid-w6v3u23bouk .actor-man line{stroke:#444;fill:#161616;}#mermaid-w6v3u23bouk .actor-man circle,#mermaid-w6v3u23bouk line{stroke:#444;fill:#161616;stroke-width:2px;}#mermaid-w6v3u23bouk :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" style="stroke-dasharray: 0px, 0px;" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><g><rect class="note" height="44" width="323" stroke="#666" fill="#EDF2AE" y="221" x="198.5"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="226" x="360"><tspan x="360">OnNewConnection()创建RtmpContext [1](</tspan></text></g><g><rect class="note" height="44" width="214" stroke="#666" fill="#EDF2AE" y="449" x="253"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="454" x="360"><tspan x="360">通过RtmpContext处理握手</tspan></text></g><g><rect class="note" height="44" width="150" stroke="#666" fill="#EDF2AE" y="729" x="597"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="734" x="672"><tspan x="672">处理推流请求 [2](</tspan></text></g><g><rect class="note" height="44" width="689" stroke="#666" fill="#EDF2AE" y="835" x="647"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="840" x="992"><tspan x="992">创建Session [3](</tspan></text></g><g><rect class="note" height="44" width="179" stroke="#666" fill="#EDF2AE" y="1023" x="1221.5"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1028" x="1311"><tspan x="1311">创建发布者并设置 [4](</tspan></text></g><g><rect class="note" height="44" width="889" stroke="#666" fill="#EDF2AE" y="1471" x="647"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1476" x="1092"><tspan x="1092">将数据添加到Stream [5](</tspan></text></g><g><rect class="note" height="44" width="413" stroke="#666" fill="#EDF2AE" y="1583" x="1686"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1588" x="1893"><tspan x="1893">HTTP请求FLV流</tspan></text></g><g><rect class="note" height="44" width="153" stroke="#666" fill="#EDF2AE" y="1689" x="595.5"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1694" x="672"><tspan x="672">处理HTTP请求 [6](</tspan></text></g><g><rect class="note" height="44" width="689" stroke="#666" fill="#EDF2AE" y="1847" x="647"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1852" x="992"><tspan x="992">创建播放用户 [7](</tspan></text></g><g><rect class="note" height="44" width="1718" stroke="#666" fill="#EDF2AE" y="2041" x="647"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2046" x="1506"><tspan x="1506">设置FlvContext [8](</tspan></text></g><g><rect class="note" height="44" width="322" stroke="#666" fill="#EDF2AE" y="2153" x="2179"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2158" x="2340"><tspan x="2340">SendFlvHttpHeader()设置HTTP响应头 [9](</tspan></text></g><g><rect class="note" height="44" width="286" stroke="#666" fill="#EDF2AE" y="2207" x="2197"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2212" x="2340"><tspan x="2340">WriteFlvHeader()写入FLV文件头 [10](</tspan></text></g><g><rect class="note" height="44" width="181" stroke="#666" fill="#EDF2AE" y="2313" x="2546.5"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2318" x="2637"><tspan x="2637">激活用户发送数据 [11](</tspan></text></g><g><rect class="note" height="44" width="347" stroke="#666" fill="#EDF2AE" y="2685" x="2315"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2690" x="2489"><tspan x="2489">按顺序发送元数据、配置和媒体帧 [12](</tspan></text></g><g><rect class="note" height="44" width="259" stroke="#666" fill="#EDF2AE" y="2821" x="2210.5"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2826" x="2340"><tspan x="2340">将媒体数据包转换为FLV格式 [13](</tspan></text></g><g><rect class="note" height="44" width="316" stroke="#666" fill="#EDF2AE" y="2933" x="2049"></rect><text dy="1em" class="noteText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2938" x="2207"><tspan x="2207">Send()发送数据给客户端 [14](</tspan></text></g><g><line class="loopLine" y2="2987" x2="2648" y1="2987" x1="1500"></line><line class="loopLine" y2="3256" x2="2648" y1="2987" x1="2648"></line><line class="loopLine" y2="3256" x2="2648" y1="3256" x1="1500"></line><line class="loopLine" y2="3256" x2="1500" y1="2987" x1="1500"></line><polygon class="labelBox" points="1500,2987 1550,2987 1550,3000 1541.6,3007 1500,3007"></polygon><text class="labelText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="3000" x="1525">loop</text><text class="loopText" style="font-size: 16px; font-weight: 400;" text-anchor="middle" y="3005" x="2099"><tspan x="2099">[每次数据就绪]</tspan></text></g><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="216">TCP连接请求</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="123" x2="356" y1="123" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="138" x="361">创建RtmpContext</text><path marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" d="M 361,181 C 421,171 421,211 361,201"></path><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="280" x="216">RTMP握手(C0+C1)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="323" x2="356" y1="323" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="338" x="219">RTMP握手响应(S0+S1+S2)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="381" x2="79" y1="381" x1="359"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="396" x="216">RTMP握手完成(C2)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="439" x2="356" y1="439" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="508" x="216">RTMP命令消息(connect)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="551" x2="356" y1="551" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="566" x="216">RTMP命令消息(createStream)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="609" x2="356" y1="609" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="624" x="216">RTMP命令消息(publish)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="667" x2="356" y1="667" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="682" x="515">OnPublish(session_name, param)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="719" x2="668" y1="719" x1="361"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="788" x="990">CreateSession(session_name)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="825" x2="1307" y1="825" x1="673"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="894" x="990">CreatePublishUser(conn, session_name, param, UserType)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="931" x2="1307" y1="931" x1="673"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="946" x="1312">SetPublisher(user)</text><path marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" d="M 1312,983 C 1372,973 1372,1013 1312,1003"></path><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1082" x="216">发送元数据(metadata)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1125" x2="356" y1="1125" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1140" x="216">发送音频配置(audio config)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1183" x2="356" y1="1183" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1198" x="216">发送视频配置(video config)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1241" x2="356" y1="1241" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1256" x="216">发送视频关键帧</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1299" x2="356" y1="1299" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1314" x="216">发送音视频数据帧</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1357" x2="356" y1="1357" x1="76"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1372" x="515">OnRecv(conn, data)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1409" x2="668" y1="1409" x1="361"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1424" x="1090">AddPacket(packet)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1461" x2="1507" y1="1461" x1="673"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1530" x="1894">HTTP GET请求 (/domain/app/stream.flv)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1573" x2="1715" y1="1573" x1="2073"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1642" x="1193">OnRequest(conn, req, packet)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1679" x2="676" y1="1679" x1="1710"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1748" x="990">CreateSession(session_name)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1785" x2="1307" y1="1785" x1="673"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1800" x="990">CreatePlayerUser(conn, session_name, param, UserType::kUserTypePlayerFlv)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="1837" x2="1307" y1="1837" x1="673"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1906" x="1312">AddPlayer(user)</text><path marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" d="M 1312,1943 C 1372,1933 1372,1973 1312,1963"></path><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="1988" x="1505">创建FlvContext</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="2031" x2="2336" y1="2031" x1="673"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2100" x="2209">发送HTTP 200响应和FLV头</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="2143" x2="2078" y1="2143" x1="2339"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2266" x="1653">OnActive() -&gt; PostFrames()</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="2303" x2="2633" y1="2303" x1="673"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2372" x="2076">GetFrames(user)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="2409" x2="1515" y1="2409" x1="2636"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2424" x="2073">返回元数据、音视频配置和数据帧</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="2467" x2="2633" y1="2467" x1="1512"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2482" x="2490">PushFrame(meta, true)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="2519" x2="2344" y1="2519" x1="2636"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2534" x="2490">PushFrame(audio_header, true)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="2571" x2="2344" y1="2571" x1="2636"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2586" x="2490">PushFrame(video_header, true)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="2623" x2="2344" y1="2623" x1="2636"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2638" x="2490">PushFrames(out_frames_)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="2675" x2="2344" y1="2675" x1="2636"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2744" x="2341">BuildFlvFrame(packet, timestamp)</text><path marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" d="M 2341,2781 C 2401,2771 2401,2811 2341,2801"></path><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="2880" x="2209">发送FLV Tag(头部+数据)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="2923" x2="2078" y1="2923" x1="2339"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="3041" x="2076">GetFrames(user)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="3078" x2="1515" y1="3078" x1="2636"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="3093" x="2073">返回新的媒体数据</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="3136" x2="2633" y1="3136" x1="1512"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="3151" x="2490">PushFrames(out_frames_)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="3188" x2="2344" y1="3188" x1="2636"></line><text dy="1em" class="messageText" style="font-size: 16px; font-weight: 400;" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="3203" x="2209">发送FLV Tag(头部+数据)</text><line marker-end="url(#arrowhead)" style="fill: none;" stroke="none" stroke-width="2" class="messageLine0" y2="3246" x2="2078" y1="3246" x1="2339"></line></svg></div><div class="bg-input-dark absolute right-2 top-2 rounded-sm p-1 opacity-0 transition-opacity group-hover:opacity-100"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256" class="light:text-gray-800 text-white dark:text-white"><path d="M216,48V96a8,8,0,0,1-16,0V67.31l-42.34,42.35a8,8,0,0,1-11.32-11.32L188.69,56H160a8,8,0,0,1,0-16h48A8,8,0,0,1,216,48ZM98.34,146.34,56,188.69V160a8,8,0,0,0-16,0v48a8,8,0,0,0,8,8H96a8,8,0,0,0,0-16H67.31l42.35-42.34a8,8,0,0,0-11.32-11.32ZM208,152a8,8,0,0,0-8,8v28.69l-42.34-42.35a8,8,0,0,0-11.32,11.32L188.69,200H160a8,8,0,0,0,0,16h48a8,8,0,0,0,8-8V160A8,8,0,0,0,208,152ZM67.31,56H96a8,8,0,0,0,0-16H48a8,8,0,0,0-8,8V96a8,8,0,0,0,16,0V67.31l42.34,42.35a8,8,0,0,0,11.32-11.32Z"></path></svg></div></div></pre>
<h2 class="group flex items-center">详细说明  </h2>
<h3 class="group flex items-center">1. RTMP推流流程  </h3>
<ol>
<li><strong>连接与握手阶段</strong>:
<ul>
<li>推流客户端与RTMP服务器建立TCP连接</li>
<li>服务器创建RtmpContext对象并开始握手 <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">RtmpServer.cc:32-41</span></li>
<li>完成RTMP三次握手(C0/C1, S0/S1/S2, C2)</li>
</ul>
</li>
<li><strong>会话建立阶段</strong>:
<ul>
<li>客户端发送connect、createStream和publish命令</li>
<li>服务器处理publish命令 <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">LiveService.cc:160-183</span></li>
<li>服务器创建Session对象 <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">LiveService.cc:28-56</span></li>
<li>服务器创建发布者用户(PublishUser)并设置到Session</li>
</ul>
</li>
<li><strong>媒体数据传输阶段</strong>:
<ul>
<li>客户端按顺序发送元数据、音频配置、视频配置、视频关键帧和音视频数据</li>
<li>服务器将接收到的数据添加到Stream <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">LiveService.cc:185-195</span></li>
<li>Stream管理GOP和编解码器信息</li>
</ul>
</li>
</ol>
<h3 class="group flex items-center">2. HTTP-FLV拉流流程  </h3>
<ol>
<li><strong>HTTP请求处理</strong>:
<ul>
<li>客户端发送HTTP GET请求(/domain/app/stream.flv)</li>
<li>服务器的HttpServer接收请求并传递给LiveService <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">LiveService.cc:249-327</span></li>
<li>LiveService解析请求路径，提取域名、应用和流名称</li>
</ul>
</li>
<li><strong>播放会话建立</strong>:
<ul>
<li>创建或查找Session</li>
<li>创建FlvPlayerUser <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">LiveService.cc:310-321</span></li>
<li>创建FlvContext来处理FLV协议转换 <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">LiveService.cc:323-324</span></li>
</ul>
</li>
<li><strong>FLV数据发送</strong>:
<ul>
<li>FlvContext发送HTTP 200响应头和FLV文件头 <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">FlvContext.cc:54-89</span></li>
<li>FlvPlayerUser从Stream获取数据并通过PostFrames处理 <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">FlvPlayerUser.cc:14-70</span></li>
<li>按顺序发送元数据、音频配置、视频配置和媒体数据 <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">FlvPlayerUser.cc:28-64</span></li>
<li>FlvContext将媒体包转换为FLV格式 <span role="link" tabindex="0" class="bg-pacific/10 text-pacific active:bg-pacific/20 hover:bg-pacific/20 cursor-pointer rounded-md px-[0.25rem] py-[0.12rem] text-xs font-normal leading-[15px] transition-colors duration-100 before:hidden after:hidden" style="font-family: &quot;IBM Plex Mono&quot;, &quot;IBM Plex Mono Fallback&quot;; font-weight: 400; font-style: normal;">FlvContext.cc:91-130</span></li>
<li>持续发送新的媒体数据</li>
</ul>
</li>
</ol>
<h3 class="group flex items-center">3. 数据流转换  </h3>
<p>RTMP数据包在服务器内部被转换为FLV格式：</p>
<ul>
<li>原始RTMP数据包被存储在Stream中</li>
<li>FlvPlayerUser请求这些数据包</li>
<li>FlvContext负责将数据包转换为FLV格式的Tag</li>
<li>HTTP协议用于传输FLV数据</li>
</ul>
<h2 class="group flex items-center">Notes  </h2>
<ol>
<li>整个过程涉及多个组件协同工作：RtmpServer、HttpServer、LiveService、Session、Stream、FlvPlayerUser和FlvContext</li>
<li>服务器能同时支持多个推流和拉流，通过Session和Stream进行管理</li>
<li>对于同一个流，可以有多个拉流客户端，服务器会为每个拉流客户端创建单独的FlvPlayerUser</li>
</ol></div><div class="flex items-center gap-1 text-neutral-300"><button class="rounded-lg p-1.5 transition-colors hover:bg-white/10 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M234,80.12A24,24,0,0,0,216,72H160V56a40,40,0,0,0-40-40,8,8,0,0,0-7.16,4.42L75.06,96H32a16,16,0,0,0-16,16v88a16,16,0,0,0,16,16H204a24,24,0,0,0,23.82-21l12-96A24,24,0,0,0,234,80.12ZM32,112H72v88H32ZM223.94,97l-12,96a8,8,0,0,1-7.94,7H88V105.89l36.71-73.43A24,24,0,0,1,144,56V80a8,8,0,0,0,8,8h64a8,8,0,0,1,7.94,9Z"></path></svg></button><button class="rounded-lg p-1.5 transition-colors hover:bg-white/10 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4"><path d="M239.82,157l-12-96A24,24,0,0,0,204,40H32A16,16,0,0,0,16,56v88a16,16,0,0,0,16,16H75.06l37.78,75.58A8,8,0,0,0,120,240a40,40,0,0,0,40-40V184h56a24,24,0,0,0,23.82-27ZM72,144H32V56H72Zm150,21.29a7.88,7.88,0,0,1-6,2.71H152a8,8,0,0,0-8,8v24a24,24,0,0,1-19.29,23.54L88,150.11V56H204a8,8,0,0,1,7.94,7l12,96A7.87,7.87,0,0,1,222,165.29Z"></path></svg></button></div></div></div></div></div><div class="min-w-0 flex-1 scroll-smooth xl:[flex-grow:3]" style="scrollbar-width: thin; scrollbar-color: rgb(90, 90, 90) transparent; min-height: calc(-205px + 100vh);"><div style="max-height: calc(-145px + 100vh);" class="sticky left-0 top-0 overflow-y-auto rounded-md"><div class="flex flex-col gap-3 p-0"><div id="file-Repo Algorithm-zh/StreamMediaServer: src/mmedia/rtmp/RtmpServer.cc" class="flex flex-col gap-2 scroll-smooth rounded-md" style="content-visibility: auto;"><div class="scrollbar-hide relative w-full p-0 ring-1 ring-neutral-800 rounded-sm"><div class="bg-secondary dark:bg-surface sticky top-0 z-10 flex w-full items-center justify-between px-3 py-1.5 text-sm text-neutral-300 rounded-t-sm"><div class="flex min-w-0 grow items-center gap-2"><button><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path></svg></button><div class="[&amp;_svg_path]:fill-current size-4 flex-shrink-0" style="fill: rgb(81, 154, 186); height: 20px; width: 20px;"><svg viewBox="0 0 32 32"><path d="M8.3 15.5c0-1.3.2-2.4.6-3.4.4-1 .9-1.8 1.6-2.5.7-.7 1.5-1.2 2.4-1.6s1.9-.5 2.9-.5 1.9.2 2.7.6c.8.4 1.5.9 2 1.4L18.3 12c-.4-.3-.7-.6-1.1-.7s-.8-.3-1.4-.3c-.5 0-.9.1-1.3.3-.4.2-.8.5-1.1.9s-.5.8-.7 1.4c-.2.6-.3 1.2-.3 1.9 0 1.5.3 2.6 1 3.3.7.8 1.5 1.2 2.6 1.2.5 0 1-.1 1.4-.3.4-.2.8-.5 1.1-.9l2.2 2.5c-.7.8-1.4 1.3-2.2 1.7-.8.4-1.7.6-2.7.6s-2-.2-2.9-.5-1.7-.8-2.4-1.5-1.1-1.7-1.5-2.7c-.5-1-.7-2.1-.7-3.4z"></path><path d="M18.2 12.9h-1.4v1.7h-1.6V16h1.6v1.8h1.4V16h1.6v-1.4h-1.6v-1.7zm6 1.6v-2h-1.7v2h-1.9v1.7h1.9v2.1h1.7v-2.1h1.9v-1.7h-1.9z"></path></svg></div><a href="https://github.com/Algorithm-zh/StreamMediaServer" target="_blank" rel="noreferrer" class="cursor-pointer truncate text-neutral-500 hover:underline">Algorithm-zh/StreamMediaServer</a><a href="https://github.com/Algorithm-zh/StreamMediaServer/blob/99517f48/src/mmedia/rtmp/RtmpServer.cc" target="_blank" rel="noreferrer" class="cursor-pointer truncate text-black dark:text-neutral-300 hover:underline">src/mmedia/rtmp/RtmpServer.cc</a><button><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4 text-neutral-500"><path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"></path></svg></button></div></div><div class="scrollbar-hide grid overflow-auto scroll-smooth"><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M205.66,138.34a8,8,0,0,1-11.32,11.32L136,91.31V224a8,8,0,0,1-16,0V91.31L61.66,149.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0ZM216,32H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">29</span><span>  TcpServer::Stop();
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">30</span>}
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">31</span> </span></code></pre></div><div class="citation-0-0 citation-0-0"><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-[#6096FF]/10"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">32</span><span>void RtmpServer::OnNewConnection(const TcpConnectionPtr &amp;conn)  {
</span></span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">33</span> 
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">34</span>  if(rtmp_handler_)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">35</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">36</span>    rtmp_handler_-&gt;OnNewConnection(conn);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">37</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">38</span>  RtmpContextPtr shake = std::make_shared&lt;RtmpContext&gt;(conn, rtmp_handler_);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">39</span>  conn-&gt;SetContext(kRtmpContext, shake);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">40</span>  shake-&gt;StartHandShake();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">41</span>}</span></code></pre></div></div><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">42</span><span> 
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">43</span>void RtmpServer::OnDestroyed(const TcpConnectionPtr &amp;conn)  {
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">44</span> </span></code></pre></div><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M50.34,117.66a8,8,0,0,1,11.32-11.32L120,164.69V32a8,8,0,0,1,16,0V164.69l58.34-58.35a8,8,0,0,1,11.32,11.32l-72,72a8,8,0,0,1-11.32,0ZM216,208H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button></div></div></div><div id="file-Repo Algorithm-zh/StreamMediaServer: src/live/LiveService.cc" class="flex flex-col gap-2 scroll-smooth rounded-md" style="content-visibility: auto;"><div class="scrollbar-hide relative w-full p-0 ring-1 ring-neutral-800 rounded-sm"><div class="bg-secondary dark:bg-surface sticky top-0 z-10 flex w-full items-center justify-between px-3 py-1.5 text-sm text-neutral-300 rounded-t-sm"><div class="flex min-w-0 grow items-center gap-2"><button><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path></svg></button><div class="[&amp;_svg_path]:fill-current size-4 flex-shrink-0" style="fill: rgb(81, 154, 186); height: 20px; width: 20px;"><svg viewBox="0 0 32 32"><path d="M8.3 15.5c0-1.3.2-2.4.6-3.4.4-1 .9-1.8 1.6-2.5.7-.7 1.5-1.2 2.4-1.6s1.9-.5 2.9-.5 1.9.2 2.7.6c.8.4 1.5.9 2 1.4L18.3 12c-.4-.3-.7-.6-1.1-.7s-.8-.3-1.4-.3c-.5 0-.9.1-1.3.3-.4.2-.8.5-1.1.9s-.5.8-.7 1.4c-.2.6-.3 1.2-.3 1.9 0 1.5.3 2.6 1 3.3.7.8 1.5 1.2 2.6 1.2.5 0 1-.1 1.4-.3.4-.2.8-.5 1.1-.9l2.2 2.5c-.7.8-1.4 1.3-2.2 1.7-.8.4-1.7.6-2.7.6s-2-.2-2.9-.5-1.7-.8-2.4-1.5-1.1-1.7-1.5-2.7c-.5-1-.7-2.1-.7-3.4z"></path><path d="M18.2 12.9h-1.4v1.7h-1.6V16h1.6v1.8h1.4V16h1.6v-1.4h-1.6v-1.7zm6 1.6v-2h-1.7v2h-1.9v1.7h1.9v2.1h1.7v-2.1h1.9v-1.7h-1.9z"></path></svg></div><a href="https://github.com/Algorithm-zh/StreamMediaServer" target="_blank" rel="noreferrer" class="cursor-pointer truncate text-neutral-500 hover:underline">Algorithm-zh/StreamMediaServer</a><a href="https://github.com/Algorithm-zh/StreamMediaServer/blob/99517f48/src/live/LiveService.cc" target="_blank" rel="noreferrer" class="cursor-pointer truncate text-black dark:text-neutral-300 hover:underline">src/live/LiveService.cc</a><button><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4 text-neutral-500"><path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"></path></svg></button></div></div><div class="scrollbar-hide grid overflow-auto scroll-smooth"><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M205.66,138.34a8,8,0,0,1-11.32,11.32L136,91.31V224a8,8,0,0,1-16,0V91.31L61.66,149.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0ZM216,32H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">25</span><span>{
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">26</span>  static SessionPtr session_null;
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">27</span>}</span></code></pre></div><div class="citation-0-2 citation-0-2"><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-[#6096FF]/10"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">28</span><span>SessionPtr LiveService::CreateSession(const std::string &amp;session_name)  {
</span></span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">29</span>  std::lock_guard&lt;std::mutex&gt; lock(lock_);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">30</span>  auto iter = sessions_.find(session_name);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">31</span>  if(iter != sessions_.end())
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">32</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">33</span>    return iter-&gt;second;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">34</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">35</span>  auto list = base::StringUtils::SplitString(session_name, "/");
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">36</span>  if(list.size() != 3)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">37</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">38</span>    LIVE_ERROR &lt;&lt; "create session faild. invalid session name:" &lt;&lt; session_name;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">39</span>    return session_null;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">40</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">41</span>  //查找配置
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">42</span>  ConfigPtr config = sConfigMgr-&gt;GetConfig();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">43</span>  auto app_info = config-&gt;GetAppInfo(list[0], list[1]);//domain app
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">44</span>  //查找失败
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">45</span>  if(!app_info)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">46</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">47</span>    LIVE_ERROR &lt;&lt; "create session faild. cann't find config. domain:" &lt;&lt; list[0] &lt;&lt; ", app:" &lt;&lt; list[1];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">48</span>    return session_null;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">49</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">50</span>  //找到配置了，创建session
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">51</span>  auto s = std::make_shared&lt;Session&gt;(session_name);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">52</span>  s-&gt;SetAppInfo(app_info);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">53</span>  sessions_.emplace(session_name, s);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">54</span>  LIVE_DEBUG &lt;&lt; "create session success. session name:" &lt;&lt; session_name &lt;&lt; " now:" &lt;&lt; base::TTime::NowMs();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">55</span>  return s;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">56</span>}</span></code></pre></div></div><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">57</span><span> 
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">58</span>SessionPtr LiveService::FindSession(const std::string &amp;session_name)  {
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">59</span>  std::lock_guard&lt;std::mutex&gt; lock(lock_);</span></code></pre></div><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M50.34,117.66a8,8,0,0,1,11.32-11.32L120,164.69V32a8,8,0,0,1,16,0V164.69l58.34-58.35a8,8,0,0,1,11.32,11.32l-72,72a8,8,0,0,1-11.32,0ZM216,208H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M205.66,138.34a8,8,0,0,1-11.32,11.32L136,91.31V224a8,8,0,0,1-16,0V91.31L61.66,149.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0ZM216,32H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">157</span><span>  return true;
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">158</span>}
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">159</span> </span></code></pre></div><div class="citation-0-1 citation-0-1 citation-0-3"><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-[#6096FF]/10"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">160</span><span>bool LiveService::OnPublish(const TcpConnectionPtr &amp;conn, const std::string &amp;session_name, const std::string &amp;param)  {
</span></span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">161</span>
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">162</span>  LIVE_DEBUG &lt;&lt; "on publish session name:" &lt;&lt; session_name 
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">163</span>            &lt;&lt; ", param:" &lt;&lt; param 
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">164</span>            &lt;&lt; ", host:" &lt;&lt; conn-&gt;PeerAddr().ToIpPort()
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">165</span>            &lt;&lt; ", now:" &lt;&lt; base::TTime::NowMs();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">166</span>  auto s = CreateSession(session_name);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">167</span>  if(!s)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">168</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">169</span>    LIVE_ERROR &lt;&lt; "create session failed.session_name:" &lt;&lt; session_name;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">170</span>    conn-&gt;ForceClose();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">171</span>    return false;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">172</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">173</span>  auto user = s-&gt;CreatePublishUser(conn, session_name, param, UserType::kUserTypePublishRtmp);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">174</span>  if(!user)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">175</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">176</span>    LIVE_ERROR &lt;&lt; "create publish user failed.session_name:" &lt;&lt; session_name;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">177</span>    conn-&gt;ForceClose();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">178</span>    return false;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">179</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">180</span>  conn-&gt;SetContext(kUserContext, user);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">181</span>  s-&gt;SetPublisher(user);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">182</span>  return true;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">183</span>}</span></code></pre></div></div><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">184</span><span> </span></span></code></pre></div><div class="citation-0-4 citation-0-4"><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-[#6096FF]/10"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">185</span><span>void LiveService::OnRecv(const TcpConnectionPtr &amp;conn, PacketPtr &amp;&amp;data)  {
</span></span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">186</span> 
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">187</span>  auto user = conn-&gt;GetContext&lt;User&gt;(kUserContext);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">188</span>  if(!user) 
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">189</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">190</span>    LIVE_ERROR &lt;&lt; "no user found.host:" &lt;&lt; conn-&gt;PeerAddr().ToIpPort();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">191</span>    conn-&gt;ForceClose();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">192</span>    return ;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">193</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">194</span>  user-&gt;GetStream()-&gt;AddPacket(std::move(data));
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">195</span>}</span></code></pre></div></div><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">196</span><span> 
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">197</span>void LiveService::Start()  {
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">198</span> </span></code></pre></div><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M50.34,117.66a8,8,0,0,1,11.32-11.32L120,164.69V32a8,8,0,0,1,16,0V164.69l58.34-58.35a8,8,0,0,1,11.32,11.32l-72,72a8,8,0,0,1-11.32,0ZM216,208H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M205.66,138.34a8,8,0,0,1-11.32,11.32L136,91.31V224a8,8,0,0,1-16,0V91.31L61.66,149.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0ZM216,32H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">246</span><span>	return false;
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">247</span>}
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">248</span> </span></code></pre></div><div class="citation-0-5 citation-0-5 citation-0-6 citation-0-6 citation-0-7 citation-0-7"><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-[#6096FF]/10"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">249</span><span>void LiveService::OnRequest(const TcpConnectionPtr &amp;conn, const HttpRequestPtr &amp;req, const PacketPtr &amp;packet)  {
</span></span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">250</span>  LIVE_DEBUG &lt;&lt; "on request:" &lt;&lt; req-&gt;AppendToBuffer();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">251</span>  if(req-&gt;IsRequest())
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">252</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">253</span>    LIVE_DEBUG &lt;&lt; "req method:" &lt;&lt; req-&gt;Method() &lt;&lt; " path:" &lt;&lt; req-&gt;Path();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">254</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">255</span>  else
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">256</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">257</span>    LIVE_DEBUG &lt;&lt; "res code:" &lt;&lt; req-&gt;GetStatusCode() &lt;&lt; " msg:" &lt;&lt; HttpUtils::ParseStatusMessage(req-&gt;GetStatusCode());
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">258</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">259</span>  auto headers = req-&gt;Headers();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">260</span>  for(auto const &amp;h : headers)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">261</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">262</span>    LIVE_DEBUG &lt;&lt; "header:" &lt;&lt; h.first &lt;&lt; ":" &lt;&lt; h.second;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">263</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">264</span>
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">265</span>  if(req-&gt;IsRequest())
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">266</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">267</span>    //http://ip:port/domain/app/stream.flv
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">268</span>    //http://ip:port/domain/app/stream/filename.flv
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">269</span>    auto list = base::StringUtils::SplitString(req-&gt;Path(), "/");
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">270</span>    if(list.size() &lt; 4)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">271</span>    {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">272</span>      auto http_cxt = conn-&gt;GetContext&lt;HttpContext&gt;(kHttpContext);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">273</span>      if(http_cxt)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">274</span>      {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">275</span>        auto res = HttpRequest::NewHttp400Response();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">276</span>        http_cxt-&gt;PostRequest(res);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">277</span>        return ;//等待对端关闭
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">278</span>      }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">279</span>    }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">280</span>    const std::string &amp;domain = list[1];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">281</span>    const std::string &amp;app = list[2];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">282</span>    std::string filename = list[3];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">283</span>    std::string stream_name;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">284</span>    if(list.size() &gt; 4)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">285</span>    {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">286</span>      filename = list[4];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">287</span>      stream_name = list[3];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">288</span>    }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">289</span>    else
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">290</span>    {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">291</span>      stream_name = base::StringUtils::FileName(filename);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">292</span>    }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">293</span>    std::string ext = base::StringUtils::Extension(filename);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">294</span>    if(ext == "flv")
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">295</span>    {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">296</span>      std::string session_name = domain + "/" + app + "/" + stream_name;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">297</span>      LIVE_DEBUG &lt;&lt; "on play session name:" &lt;&lt; session_name;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">298</span>      auto s = CreateSession(session_name);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">299</span>      if(!s)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">300</span>      {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">301</span>        LIVE_ERROR &lt;&lt; "create session failed.session_name:" &lt;&lt; session_name;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">302</span>        auto http_cxt = conn-&gt;GetContext&lt;HttpContext&gt;(kHttpContext);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">303</span>        if(http_cxt)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">304</span>        {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">305</span>          auto res = HttpRequest::NewHttp404Response();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">306</span>          http_cxt-&gt;PostRequest(res);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">307</span>          return ;//等待对端关闭
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">308</span>        }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">309</span>      }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">310</span>      auto user = s-&gt;CreatePlayerUser(conn, session_name, "", UserType::kUserTypePlayerFlv);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">311</span>      if(!user)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">312</span>      {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">313</span>        LIVE_ERROR &lt;&lt; "create player user failed.session_name:" &lt;&lt; session_name;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">314</span>        auto http_cxt = conn-&gt;GetContext&lt;HttpContext&gt;(kHttpContext);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">315</span>        if(http_cxt)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">316</span>        {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">317</span>          auto res = HttpRequest::NewHttp404Response();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">318</span>          http_cxt-&gt;PostRequest(res);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">319</span>          return ;//等待对端关闭
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">320</span>        }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">321</span>      }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">322</span>      conn-&gt;SetContext(kUserContext, user);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">323</span>      auto flv = std::make_shared&lt;FlvContext&gt;(conn, this);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">324</span>      conn-&gt;SetContext(kFlvContext, flv);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">325</span>      s-&gt;AddPlayer(std::dynamic_pointer_cast&lt;PlayerUser&gt;(user));
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">326</span>    }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">327</span>  }</span></code></pre></div></div><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">328</span><span>  //测试使用http发送flv
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">329</span>  //if(req-&gt;IsRequest())
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">330</span>  //{</span></code></pre></div><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M50.34,117.66a8,8,0,0,1,11.32-11.32L120,164.69V32a8,8,0,0,1,16,0V164.69l58.34-58.35a8,8,0,0,1,11.32,11.32l-72,72a8,8,0,0,1-11.32,0ZM216,208H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button></div></div></div><div id="file-Repo Algorithm-zh/StreamMediaServer: src/mmedia/flv/FlvContext.cc" class="flex flex-col gap-2 scroll-smooth rounded-md" style="content-visibility: auto;"><div class="scrollbar-hide relative w-full p-0 ring-1 ring-neutral-800 rounded-sm"><div class="bg-secondary dark:bg-surface sticky top-0 z-10 flex w-full items-center justify-between px-3 py-1.5 text-sm text-neutral-300 rounded-t-sm"><div class="flex min-w-0 grow items-center gap-2"><button><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path></svg></button><div class="[&amp;_svg_path]:fill-current size-4 flex-shrink-0" style="fill: rgb(81, 154, 186); height: 20px; width: 20px;"><svg viewBox="0 0 32 32"><path d="M8.3 15.5c0-1.3.2-2.4.6-3.4.4-1 .9-1.8 1.6-2.5.7-.7 1.5-1.2 2.4-1.6s1.9-.5 2.9-.5 1.9.2 2.7.6c.8.4 1.5.9 2 1.4L18.3 12c-.4-.3-.7-.6-1.1-.7s-.8-.3-1.4-.3c-.5 0-.9.1-1.3.3-.4.2-.8.5-1.1.9s-.5.8-.7 1.4c-.2.6-.3 1.2-.3 1.9 0 1.5.3 2.6 1 3.3.7.8 1.5 1.2 2.6 1.2.5 0 1-.1 1.4-.3.4-.2.8-.5 1.1-.9l2.2 2.5c-.7.8-1.4 1.3-2.2 1.7-.8.4-1.7.6-2.7.6s-2-.2-2.9-.5-1.7-.8-2.4-1.5-1.1-1.7-1.5-2.7c-.5-1-.7-2.1-.7-3.4z"></path><path d="M18.2 12.9h-1.4v1.7h-1.6V16h1.6v1.8h1.4V16h1.6v-1.4h-1.6v-1.7zm6 1.6v-2h-1.7v2h-1.9v1.7h1.9v2.1h1.7v-2.1h1.9v-1.7h-1.9z"></path></svg></div><a href="https://github.com/Algorithm-zh/StreamMediaServer" target="_blank" rel="noreferrer" class="cursor-pointer truncate text-neutral-500 hover:underline">Algorithm-zh/StreamMediaServer</a><a href="https://github.com/Algorithm-zh/StreamMediaServer/blob/99517f48/src/mmedia/flv/FlvContext.cc" target="_blank" rel="noreferrer" class="cursor-pointer truncate text-black dark:text-neutral-300 hover:underline">src/mmedia/flv/FlvContext.cc</a><button><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4 text-neutral-500"><path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"></path></svg></button></div></div><div class="scrollbar-hide grid overflow-auto scroll-smooth"><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M205.66,138.34a8,8,0,0,1-11.32,11.32L136,91.31V224a8,8,0,0,1-16,0V91.31L61.66,149.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0ZM216,32H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">51</span><span>  current_ = out_buffer_;
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">52</span>}
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">53</span> </span></code></pre></div><div class="citation-0-8 citation-0-14 citation-0-9"><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-[#6096FF]/10"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">54</span><span>void FlvContext::SendFlvHttpHeader(bool has_video, bool has_audio)  {
</span></span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">55</span> 
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">56</span>  std::stringstream ss;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">57</span>  ss &lt;&lt; "HTTP/1.1 200 OK\r\n";
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">58</span>  ss &lt;&lt; "Access-Control-Allow-Origin: *\r\n";
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">59</span>  ss &lt;&lt; "Content-Type: video/x-flv\r\n";
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">60</span>  ss &lt;&lt; "Connection: keep-alive\r\n";
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">61</span>  ss &lt;&lt; "\r\n";
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">62</span>  http_header_ = ss.str();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">63</span>  auto header_node = std::make_shared&lt;BufferNode&gt;(http_header_.data(), http_header_.size());
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">64</span>  bufs_.emplace_back(std::move(header_node));
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">65</span>  WriteFlvHeader(has_video, has_audio);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">66</span>  Send();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">67</span>}
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">68</span> 
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">69</span>void FlvContext::WriteFlvHeader(bool has_video, bool has_audio)  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">70</span> 
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">71</span>  char *header = current_;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">72</span>  if(!has_audio)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">73</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">74</span>    memcpy(current_, flv_video_only_header, sizeof(flv_video_only_header));
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">75</span>    current_ += sizeof(flv_video_only_header);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">76</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">77</span>  else if(!has_video)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">78</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">79</span>    memcpy(current_, flv_audio_only_header, sizeof(flv_audio_only_header));
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">80</span>    current_ += sizeof(flv_audio_only_header);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">81</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">82</span>  else
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">83</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">84</span>    memcpy(current_, flv_header, sizeof(flv_header));
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">85</span>    current_ += sizeof(flv_header);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">86</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">87</span>  auto h = std::make_shared&lt;BufferNode&gt;(header, current_ - header);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">88</span>  bufs_.emplace_back(std::move(h));
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">89</span>}</span></code></pre></div></div><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">90</span><span> </span></span></code></pre></div><div class="citation-0-12 citation-0-12"><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-[#6096FF]/10"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">91</span><span>bool FlvContext::BuildFlvFrame(PacketPtr &amp;pkt, uint32_t timestamp)  {
</span></span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">92</span>
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">93</span>  out_packets_.emplace_back(pkt);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">94</span>  char *header = current_;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">95</span>  char *p = (char *)&amp;previous_size_;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">96</span>  //Tag header
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">97</span>  //四字节的上一个tag的长度
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">98</span>  *current_++ = p[3];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">99</span>  *current_++ = p[2];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">100</span>  *current_++ = p[1];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">101</span>  *current_++ = p[0];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">102</span>  //包类型
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">103</span>  *current_++ = GetRtmpPacketType(pkt);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">104</span>  //数据包长度
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">105</span>  auto mlen = pkt-&gt;PacketSize();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">106</span>  p = (char *)&amp;mlen;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">107</span>  *current_++ = p[2];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">108</span>  *current_++ = p[1];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">109</span>  *current_++ = p[0];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">110</span>  //时间戳
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">111</span>  p = (char *)&amp;timestamp;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">112</span>  *current_++ = p[2];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">113</span>  *current_++ = p[1];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">114</span>  *current_++ = p[0];
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">115</span>  *current_++ = 0;//timeStampExtended
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">116</span>  
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">117</span>  //chunk stream id
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">118</span>  *current_++ = 0;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">119</span>  *current_++ = 0;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">120</span>  *current_++ = 0;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">121</span>
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">122</span>  previous_size_ = mlen + 11;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">123</span>
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">124</span>  auto h = std::make_shared&lt;BufferNode&gt;(header, current_ - header);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">125</span>  bufs_.emplace_back(std::move(h));
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">126</span>  //tag body
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">127</span>  auto c = std::make_shared&lt;BufferNode&gt;(pkt-&gt;Data(), pkt-&gt;PacketSize());
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">128</span>  bufs_.emplace_back(std::move(c));
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">129</span>  return true;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">130</span>}</span></code></pre></div></div><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">131</span><span> </span></span></code></pre></div><div class="citation-0-13"><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-[#6096FF]/10"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">132</span><span>void FlvContext::Send()  {
</span></span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">133</span> 
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">134</span>  if(sending_)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">135</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">136</span>    return;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">137</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">138</span>  sending_ = true;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">139</span>  connection_-&gt;Send(bufs_);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">140</span>}</span></code></pre></div></div><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">141</span><span> 
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">142</span>void FlvContext::WriteComplete(const TcpConnectionPtr &amp;conn)  {
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">143</span>  sending_ = false;</span></code></pre></div><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M50.34,117.66a8,8,0,0,1,11.32-11.32L120,164.69V32a8,8,0,0,1,16,0V164.69l58.34-58.35a8,8,0,0,1,11.32,11.32l-72,72a8,8,0,0,1-11.32,0ZM216,208H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button></div></div></div><div id="file-Repo Algorithm-zh/StreamMediaServer: src/live/FlvPlayerUser.cc" class="flex flex-col gap-2 scroll-smooth rounded-md" style="content-visibility: auto;"><div class="scrollbar-hide relative w-full p-0 ring-1 ring-neutral-800 rounded-sm"><div class="bg-secondary dark:bg-surface sticky top-0 z-10 flex w-full items-center justify-between px-3 py-1.5 text-sm text-neutral-300 rounded-t-sm"><div class="flex min-w-0 grow items-center gap-2"><button><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path></svg></button><div class="[&amp;_svg_path]:fill-current size-4 flex-shrink-0" style="fill: rgb(81, 154, 186); height: 20px; width: 20px;"><svg viewBox="0 0 32 32"><path d="M8.3 15.5c0-1.3.2-2.4.6-3.4.4-1 .9-1.8 1.6-2.5.7-.7 1.5-1.2 2.4-1.6s1.9-.5 2.9-.5 1.9.2 2.7.6c.8.4 1.5.9 2 1.4L18.3 12c-.4-.3-.7-.6-1.1-.7s-.8-.3-1.4-.3c-.5 0-.9.1-1.3.3-.4.2-.8.5-1.1.9s-.5.8-.7 1.4c-.2.6-.3 1.2-.3 1.9 0 1.5.3 2.6 1 3.3.7.8 1.5 1.2 2.6 1.2.5 0 1-.1 1.4-.3.4-.2.8-.5 1.1-.9l2.2 2.5c-.7.8-1.4 1.3-2.2 1.7-.8.4-1.7.6-2.7.6s-2-.2-2.9-.5-1.7-.8-2.4-1.5-1.1-1.7-1.5-2.7c-.5-1-.7-2.1-.7-3.4z"></path><path d="M18.2 12.9h-1.4v1.7h-1.6V16h1.6v1.8h1.4V16h1.6v-1.4h-1.6v-1.7zm6 1.6v-2h-1.7v2h-1.9v1.7h1.9v2.1h1.7v-2.1h1.9v-1.7h-1.9z"></path></svg></div><a href="https://github.com/Algorithm-zh/StreamMediaServer" target="_blank" rel="noreferrer" class="cursor-pointer truncate text-neutral-500 hover:underline">Algorithm-zh/StreamMediaServer</a><a href="https://github.com/Algorithm-zh/StreamMediaServer/blob/99517f48/src/live/FlvPlayerUser.cc" target="_blank" rel="noreferrer" class="cursor-pointer truncate text-black dark:text-neutral-300 hover:underline">src/live/FlvPlayerUser.cc</a><button><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-4 w-4 text-neutral-500"><path d="M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"></path></svg></button></div></div><div class="scrollbar-hide grid overflow-auto scroll-smooth"><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M205.66,138.34a8,8,0,0,1-11.32,11.32L136,91.31V224a8,8,0,0,1-16,0V91.31L61.66,149.66a8,8,0,0,1-11.32-11.32l72-72a8,8,0,0,1,11.32,0ZM216,32H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">11</span><span>using namespace tmms::live;
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">12</span>using namespace tmms::base;
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">13</span> </span></code></pre></div><div class="citation-0-10 citation-0-10 citation-0-11 citation-0-11"><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-[#6096FF]/10"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">14</span><span>bool FlvPlayerUser::PostFrames()  {
</span></span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">15</span>  
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">16</span>  if(!stream_-&gt;Ready() || !stream_-&gt;HasMedia())
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">17</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">18</span>    Deactive();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">19</span>    return false;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">20</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">21</span>  if(!http_header_sent_)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">22</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">23</span>    PushFlvHttpHeader();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">24</span>    return false;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">25</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">26</span>  stream_-&gt;GetFrames(std::dynamic_pointer_cast&lt;PlayerUser&gt;(shared_from_this()));
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">27</span>  //按顺序进行发送
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">28</span>  if(meta_)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">29</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">30</span>    auto ret = PushFrame(meta_, true);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">31</span>    if(ret)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">32</span>    {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">33</span>      LIVE_INFO &lt;&lt; "flv sent meta now:" &lt;&lt; base::TTime::NowMs() &lt;&lt; "host:" &lt;&lt; user_id_;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">34</span>      meta_.reset();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">35</span>    }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">36</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">37</span>  else if(audio_header_)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">38</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">39</span>    //曾经有过这个bug，true写成false了，找了好几天bug
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">40</span>    auto ret = PushFrame(audio_header_, true);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">41</span>    if(ret)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">42</span>    {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">43</span>      LIVE_INFO &lt;&lt; "flv sent audio header now:" &lt;&lt; base::TTime::NowMs() &lt;&lt; "host:" &lt;&lt; user_id_;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">44</span>      audio_header_.reset();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">45</span>    }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">46</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">47</span>  else if(video_header_)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">48</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">49</span>    //曾经有过这个bug，true写成false了，找了好几天bug
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">50</span>    auto ret = PushFrame(video_header_, true);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">51</span>    if(ret)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">52</span>    {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">53</span>      LIVE_INFO &lt;&lt; "flv sent video header now:" &lt;&lt; base::TTime::NowMs() &lt;&lt; "host:" &lt;&lt; user_id_;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">54</span>      video_header_.reset();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">55</span>    }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">56</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">57</span>  else if(!out_frames_.empty())
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">58</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">59</span>    auto ret = PushFrames(out_frames_);
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">60</span>    if(ret)
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">61</span>    {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">62</span>      out_frames_.clear();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">63</span>    }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">64</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">65</span>  else
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">66</span>  {
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">67</span>    Deactive();
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">68</span>  }
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">69</span>  return true;
</span><span style="background-color: rgb(54, 54, 54); display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">70</span>}</span></code></pre></div></div><div class="relative w-full min-w-max overflow-hidden [&amp;_pre]:overflow-hidden bg-neutral-800/80"><pre style="color: rgb(212, 212, 212); font-size: 13px; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 0px; margin: 0px; overflow: auto; background: rgb(30, 30, 30); width: 100%;"><code style="white-space: pre; font-size: 12px;"><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">71</span><span> 
</span></span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">72</span>UserType FlvPlayerUser::GetUserType() const {
</span><span style="display: block; white-space: pre; padding: 0px 20px;"><span class="linenumber react-syntax-highlighter-line-number" style="display: inline-block; min-width: 2.25em; padding-right: 1em; text-align: right; user-select: none; font-size: 11px; font-weight: normal; font-family: monospace; color: rgb(106, 153, 85);">73</span>	return UserType::kUserTypePlayerFlv;</span></code></pre></div><button class="h-5 w-full cursor-pointer bg-[#f0f0f0] hover:bg-[#e0e0e0] dark:bg-neutral-800 dark:hover:bg-neutral-700/80"><div class="flex h-full items-center gap-1.5 pl-[1.3rem] text-xs font-light text-neutral-400"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="h-3 w-3"><path d="M50.34,117.66a8,8,0,0,1,11.32-11.32L120,164.69V32a8,8,0,0,1,16,0V164.69l58.34-58.35a8,8,0,0,1,11.32,11.32l-72,72a8,8,0,0,1-11.32,0ZM216,208H40a8,8,0,0,0,0,16H216a8,8,0,0,0,0-16Z"></path></svg></div></button></div></div></div></div></div></div></div></div><div class="pointer-events-none fixed bottom-2 left-2 right-2 mt-2 md:bottom-4 md:left-0 md:right-0"><div class="z-10 mx-auto max-w-3xl"><form class="z-20 w-full rounded-md ring-[0.5px] ring-[#353535] backdrop-blur-md transition-shadow [pointer-events:all] focus-within:ring-neutral-700 bg-component/70 border border-indigo-300/20 shadow-lg shadow-indigo-500/20 [backdrop-filter:blur(8px)] dark:[backdrop-filter:blur(8px)_contrast(90%)_brightness(60%)]"><div class=""><div class="relative text-base font-normal"><div class="relative px-3 pt-3"><div class="pointer-events-none absolute left-3 right-3 top-3 ml-px flex w-full overflow-hidden text-[#8F8F8F] text-base" aria-hidden="true"><div class="flex items-center gap-1 overflow-hidden text-nowrap opacity-60">Ask a follow-up question</div></div><textarea placeholder="" rows="2" class="w-full resize-none rounded-none bg-transparent text-white focus:outline-none text-base"></textarea></div></div></div><div class="flex h-12 items-center justify-between border-t-[0.5px] border-t-[#8f8f8f] dark:border-t-[#353535] p-3"><div class="flex items-center text-sm gap-4"><div class="flex items-center gap-1 sm:gap-2"><div class="flex gap-2 sm:items-center"><label for="useDeep" class="text-text-dark dark:text-text-light flex cursor-text items-center gap-1 text-sm">Deep Research</label><div id="useDeep" class="relative inline-flex h-6 w-11 items-center rounded-full cursor-pointer border-[1px] border-[#b0b0b0] p-[1px] shadow-none dark:border-[#535353] dark:data-[state=checked]:bg-[#ef9541]/30 dark:data-[state=unchecked]:bg-[#181818]"><div class="absolute bottom-0 top-0 my-auto h-5 w-5 rounded-full bg-white shadow-md data-[state=unchecked]:bg-[#535353] data-[state=checked]:bg-[#ef9541]/80 cursor-pointer" style="transform: none;"></div><div class="h-full w-full rounded-full transition-colors duration-200 ease-in-out bg-[#d5d5d5] dark:bg-[#535353]"></div></div></div></div></div><div class="flex items-center gap-2"><button class="rounded-full bg-[#e0e0e0] p-1 text-neutral-400 transition-colors dark:bg-neutral-700" disabled="disabled"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 256 256"><path d="M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"></path></svg></button></div></div></form></div></div></div></div></div><!--$--><!--/$--><!--$--><!--/$--><script src="DeepWiki_files/webpack-acbbbb548492d4a6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[54276,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"5009\",\"static/chunks/5009-cf1c1739f4eccbfa.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"3377\",\"static/chunks/3377-d302682beb4206f6.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"6671\",\"static/chunks/6671-b0da8a89e8d16b02.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"3852\",\"static/chunks/3852-f786c46570f1c37a.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"7177\",\"static/chunks/app/layout-069cb77866786652.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\"],\"RootProvider\"]\n3:I[87555,[],\"\"]\n4:I[31295,[],\"\"]\n5:I[90894,[],\"ClientPageRoot\"]\n6:I[38340,[\"9453\",\"static/chunks/b1298b8d-549c141f97a3b262.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"8970\",\"static/chunks/378e5a93-3b0f971d3611a8a5.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"1585\",\"static/chunks/f7f68e2d-40290491c524df5c.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"4129\",\"static/chunks/7bf36345-20a79815585d2583.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"2545\",\"static/chunks/c16f53c3-c80d3b6d0c4af7a0.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"537\",\"static/chunks/537-d9d5e9261de3e69c.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"5009\",\"static/chunks/5009-cf1c1739f4eccbfa.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"3377\",\"static/chunks/3377-d302682beb4206f6.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"2136\",\"static/chunks/2136-0f8d797058c844d4.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"6671\",\"static/chunks/6671-b0da8a89e8d16b02.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"5217\",\"static/chunks/5217-9d83ca492e50c5ed.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"9514\",\"static/chunks/9514-78acba0a55208c16.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"168\",\"static/chunks/168-d8e567d7acd9a9f8.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"5938\",\"static/chunks/5938-755c17b2f8b25b9d.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"6422\",\"static/chun"])</script><script>self.__next_f.push([1,"ks/6422-90b4a59eb579f66b.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"3852\",\"static/chunks/3852-f786c46570f1c37a.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"3338\",\"static/chunks/3338-56913b1f312ae969.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"7111\",\"static/chunks/7111-6aae15bf6bffbdb1.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"3239\",\"static/chunks/3239-098acbc71a0d78b2.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"5049\",\"static/chunks/app/search/%5Bslug%5D/page-cea3c91ce1d6dd69.js?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\"],\"default\"]\n7:I[59665,[],\"MetadataBoundary\"]\n9:I[59665,[],\"OutletBoundary\"]\nc:I[74911,[],\"AsyncMetadataOutlet\"]\ne:I[59665,[],\"ViewportBoundary\"]\n10:I[26614,[],\"\"]\n11:\"$Sreact.suspense\"\n12:I[74911,[],\"AsyncMetadata\"]\n:HL[\"/_next/static/media/569ce4b8f30dc480-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/f30152c0704fba31.css?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"style\"]\n:HL[\"/_next/static/css/69dc9a343a8d610c.css?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"style\"]\n:HL[\"/_next/static/media/3478b6abef19b3b3-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/97aa57a0cb43847d.css?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"e5kxxiZUYhUhY690n1QD4\",\"p\":\"\",\"c\":[\"\",\"search\",\"rtmphtpflv_d8fb45c2-eb15-418a-8028-23d33151e615\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"search\",{\"children\":[[\"slug\",\"rtmphtpflv_d8fb45c2-eb15-418a-8028-23d33151e615\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f30152c0704fba31.css?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/69dc9a343a8d610c.css?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{}],[\"$\",\"body\",null,{\"className\":\"__variable_5cfdac font-geist-sans relative min-h-screen __variable_9a8899 bg-background antialiased\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}]]}],{\"children\":[\"search\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"rtmphtpflv_d8fb45c2-eb15-418a-8028-23d33151e615\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L5\",null,{\"Component\":\"$6\",\"searchParams\":{},\"params\":{\"slug\":\"rtmphtpflv_d8fb45c2-eb15-418a-8028-23d33151e615\"}}],[\"$\",\"$L7\",null,{\"children\":\"$L8\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/97aa57a0cb43847d.css?dpl=dpl_FhUiusEoodFgjHKGcDyrHAo3NNdH\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L9\",null,{\"children\":[\"$La\",\"$Lb\",[\"$\",\"$Lc\",null,{\"promise\":\"$@d\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"uwSsH7r8zZYpuX7h0sTLd\",{\"children\":[[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":false}\n"])</script><script>self.__next_f.push([1,"8:[\"$\",\"$11\",null,{\"fallback\":null,\"children\":[\"$\",\"$L12\",null,{\"promise\":\"$@13\"}]}]\nb:null\nf:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\na:null\n13:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"DeepWiki\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"DeepWiki provides up-to-date documentation you can talk to, for every repo in the world. Think Deep Research for GitHub - powered by Devin.\"}],[\"$\",\"meta\",\"2\",{\"property\":\"og:title\",\"content\":\"DeepWiki\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:description\",\"content\":\"DeepWiki provides up-to-date documentation you can talk to, for every repo in the world. Think Deep Research for GitHub - powered by Devin.\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:url\",\"content\":\"https://deepwiki.com\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:site_name\",\"content\":\"DeepWiki\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"DeepWiki\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\"DeepWiki provides up-to-date documentation you can talk to, for every repo in the world. Think Deep Research for GitHub - powered by Devin.\"}],[\"$\",\"link\",\"10\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"48x48\"}],[\"$\",\"link\",\"11\",{\"rel\":\"icon\",\"href\":\"/icon.png?66aaf51e0e68c818\",\"type\":\"image/png\",\"sizes\":\"16x16\"}],[\"$\",\"link\",\"12\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-icon.png?a4f658907db0ab87\",\"type\":\"image/png\",\"sizes\":\"180x180\"}]],\"error\":null,\"digest\":\"$undefined\"}\nd:{\"metadata\":\"$13:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script><next-route-announcer style="position: absolute;"></next-route-announcer><iframe id="_hjSafeContext_32993898" title="_hjSafeContext" tabindex="-1" aria-hidden="true" src="DeepWiki_files/a.html" style="display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;"></iframe></body><div style="all: initial;"><div style="all: initial;" id="__hcfy__"></div></div></html>